import{W as H,P as U,O as V,V as _,S as q,C as D,E as N,F as X,G as Q,A as Y,a as Z,H as $,b as J,c as K,d as ee,e as te,I as ne,T as ae,M as ie,R as oe,f as re,g as se,h as le}from"./OrbitControls-BY9kGCTQ.js";import{G as ce}from"./GLTFLoader-CHgAFYkJ.js";import{R as fe}from"./RGBELoader-ehVCl4tU.js";import{T as b}from"./tween.module.min-5czOaV25.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{k as pe,f as me,n as ue,c as we,a as ge,o as he}from"./index-BNrLSEyR.js";const xe={class:"container"},ve={id:"my-world",ref:"myWorld"},_e={__name:"index0",setup(be){let{ctx:F}=pe();me(()=>{ue(()=>{window.onload=P()})});function P(){let u,C=new le,s,c,w,y,g,S=[],E;const k=F.$refs.myWorld,A=new H({antialias:!0,logarithmicDepthBuffer:!0,canvas:k});A.setPixelRatio(window.devicePixelRatio),A.setSize(window.innerWidth,window.innerHeight);let W=60,I=2,L=.1,M=100,x=new U(W,I,L,M);x.position.set(0,10,20);let f=new V(x,k);f.enableZoom=!1,f.enablePan=!1,f.minPolarAngle=Math.PI/3,f.maxPolarAngle=Math.PI/2.05,f.target=new _(0,1,0),f.object.position.set(0,2,-4),f.update(!0);let R=new URL("/assets/venice_sunset_1k-GQE-mhuc.hdr",import.meta.url).href,l=new q;l.background=new D("#000000"),l.environment=new fe().load(R),l.environment.mapping=N,l.fog=new X(3355443,10,15),u=new Q(200,400,16777215,16777215),u.material.opacity=.2,u.material.depthWrite=!1,u.material.transparent=!0,l.add(u),new Y(10),l.add(new Z(14745599,1));{const i=new $(11657727,12155424,2);l.add(i)}function O(a){let e={fontFamily:"Arial",fontSize:30,fontWight:"blod",color:"#ffffff",actualFontSize:.08},t,i,p,n,o,r;return t=document.createElement("canvas"),i=t.getContext("2d"),i.font=e.fontWight+" "+e.fontSize+"px"+e.fontFamily,p=i?.measureText(a).width,t.width=p,t.height=e.fontSize,i.textAlign="center",i.textBaseline="middle",i.fillStyle=e.color,i.font=e.fontWight+" "+e.fontSize+"px"+e.fontFamily,i.fillText(a,p/2,e.fontSize/1.8),n=new K(t),o=new ee({map:n}),r=new te(o),r.scale.set(p/e.fontSize*e.actualFontSize,e.actualFontSize,e.actualFontSize),r}function G(){let a=[],e=0,t,i=new URL("../../assets/spotd.png",import.meta.url).href;new ne().load(i,function(n){let o,r,h,v,m=n.width,T=n.height/n.width;for(let d=0;d<T;d++)a[d]=new ae;for(let d=0;d<T;d++)o=document.createElement("canvas"),r=o.getContext("2d"),o.height=m,o.width=m,r?.drawImage(n,0,m*d,m,m,0,0,m,m),a[d].image=o,a[d].needsUpdate=!0;t=new ie(h,v),t.rotateX(Math.PI/2),t.visible=!1,l.add(t)}),this.effect=function(n,o,r){t.visible=!0,t.position.set(n,o,r);let h=setInterval(function(){e==10&&(e=0,t.visible=!1,clearInterval(h)),t.material.map=a[e],e++},20)}}function j(a){let e=new oe,t=new re(a.clientX/window.innerWidth*2-1,-(a.clientY/window.innerHeight)*2+1),i=new _(0,1,0),p=new se(i,0);e.setFromCamera(t,x);let n=e.ray.intersectPlane(p,i);if(!n)return;let o=new _(s.position.x,0,s.position.z),r=new _(n.x,0,n.z);E.effect(n.x,0,n.z);let h=o.distanceTo(r);s.lookAt(n.x,0,n.z),c.getClip()!=w[1]&&(c.fadeOut(.2),c=g.clipAction(w[1]),c.reset().setEffectiveTimeScale(1).setEffectiveWeight(2).fadeIn(.2).play()),y&&b.remove(y),y=new b.Tween(o).to(r,h*800).easing(b.easing.linear.none).onComplete(function(){c.fadeOut(.2),c=g.clipAction(w[0]),c.reset().setEffectiveTimeScale(1).setEffectiveWeight(2).fadeIn(.2).play()}).onUpdate(function(){s.position.set(this.x,.04,this.z);let v=s.position.clone();v.y=1,f.target=v,f.update()}).start()}const B=new URL("/assets/people-DcFVpML1.glb",import.meta.url).href;new ce().load(B,a=>{s=a.scene,s.scale.set(.7,.7,.7),w=a.animations;let e=O("马学灿");e.position.set(0,2,0),s.add(e),l.add(s),g=new J(s),S.push(g),c=g.clipAction(w[0]),c.play()}),E=new G,setTimeout(()=>{document.addEventListener("click",j,!1)},1e3);function z(){let a=C.getDelta();for(let e=0;e<S.length;e++)S[e].update(a);b.update(),requestAnimationFrame(z),A.render(l,x)}requestAnimationFrame(z)}return(u,C)=>(he(),we("div",xe,[ge("canvas",ve,null,512)]))}},Te=de(_e,[["__scopeId","data-v-19a9394f"]]);export{Te as default};
