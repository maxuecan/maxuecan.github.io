{"version":3,"file":"index.bc4cb44f.js","sources":["../../src/views/practice/i_frame/index.vue"],"sourcesContent":["<script setup>\r\n/* \r\n * iframe跨域\r\n * 模拟跨域\r\n * 例如：app游戏里面，有些活动功能，会使用iframe嵌套页面，作为打开一个功能（领取奖励，绑定手机号等）型页面，\r\n * 这样子app与页面之间就会存在跨域问题\r\n * 好处：app资源的释放（包大小，分离）\r\n */\r\nimport { onMounted } from 'vue'\r\nonMounted(() => {\r\n  // 1、通过获取 iframe 元素进而通过 contentWindow 属性获取 iframe 中的 window 对象\r\n  var iframe = document.getElementById(\"iframeId\"); //获取iframe标签\r\n  var iframeContent = iframe.contentWindow; //获取iframe的window对象\r\n  var idoc = iframeContent.document; //获取iframe的document对象\r\n\r\n  // 2、结合iframe中的 name 属性，通过window提供的 frames 获取\r\n  // 打印iframe中页面的window对象\r\n  // console.log(window.frames['iframeName'].window);\r\n\r\n  // 获取上一级的 window 对象，如果还是iframe则是该iframe的window对象\r\n  // console.log(window.parent)\r\n  // 获取最顶级容器的 window 对象，即，就是你打开页面的文档\r\n  // console.log(window.top)\r\n  // 返回自身 window 的引用。\r\n  // console.log(window.self)\r\n  // console.log(window.parent === window.top, window.parent === window.self)\r\n  // console.log(window.top === window.self)\r\n\r\n  // 父子通信\r\n  window.addEventListener('message', (e) => {\r\n    console.log(e, '父级监听')\r\n  }, false)\r\n})\r\nfunction postData() {\r\n  // 获取iframe元素\r\n  var id = document.getElementById('iframeId');\r\n  // 发送数据，触发子页面的postMessage监听事件\r\n  id.contentWindow.postMessage('我是父元素的数据', '*')\r\n  // message：将要发送到其他 window 的数据。\r\n  // targetOrigin：通过窗口的 origin 属性来指定哪些窗口能接收到消息事件，其值可以是字符串\"*\"（表示无限制）\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <iframe\r\n      name=\"iframeName\"\r\n      width=\"500px\"\r\n      height=\"500px\"\r\n      src=\"src/views/practice/i_frame/test.html\" \r\n      frameborder=\"0\"\r\n      scrolling=\"no\"\r\n      id=\"iframeId\"\r\n    >\r\n    </iframe>\r\n    <button @click=\"postData\">父按钮</button>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n</style>"],"names":[],"mappings":";sBASA,EAAA,IAAA,CAEA,GAAA,GAAA,SAAA,eAAA,UAAA,EACA,EAAA,EAAA,cACA,EAAA,SAgBA,OAAA,iBAAA,UAAA,AAAA,GAAA,CACA,QAAA,IAAA,EAAA,0BAAA,CACA,EAAA,EAAA,CACA,CAAA,EACA,YAAA,CAEA,GAAA,GAAA,SAAA,eAAA,UAAA,EAEA,EAAA,cAAA,YAAA,mDAAA,GAAA,CAGA"}