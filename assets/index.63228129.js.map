{"version":3,"file":"index.63228129.js","sources":["../../src/views/basics/index.vue"],"sourcesContent":["<script lang=\"ts\">\r\n/* \r\n * vue3基础使用\r\n */\r\n// 组件引入\r\n// import layout from '@/layout'\r\nimport { ref, isRef, reactive, computed, watch, defineComponent } from 'vue'\r\n// 接口引入\r\nimport { userLogin } from '@/api/user'\r\n// 路由引入（组合api）\r\nimport { useRouter } from 'vue-router'\r\n// vuex引入（组合api）\r\nimport { storeKey, useStore } from 'vuex'\r\n// 公共方法引入\r\nimport { setToken } from '@/utils/auth'\r\n\r\n/*\r\n * reactive 返回对象的响应式副本\r\n * reactive 将解包所有深层的 refs，同时维持 ref 的响应性。\r\n */\r\n// 初始化full_name为一个空的字符串\r\n// interface Ref<T> {value: T}\r\n// function ref<T>(value: T): Ref<T>\r\nconst full_name = ref('admin')\r\n// isRef\r\n// console.log(isRef(full_name))\r\n// 当将 ref 分配给 reactive property 时，ref 将被自动解包\r\nconst obj_name = reactive(full_name)\r\n\r\nconst handleClick = () => {\r\n  full_name.value = 'super admin' // 需要注意的是修改时，不使用this\r\n}\r\n\r\n/* 初始化数据begin */\r\n// 首先可以定义一个方法 返回初始化数据\r\n// const formData = () => {\r\n//   return {\r\n//     userName: '',\r\n//     password: ''\r\n//   }\r\n// }\r\n// 初始化页面展示数据\r\n// const form = reactive(formData())\r\n// 重置数据为初始化状态\r\n// Object.assign(form, formData())\r\n/* 初始化数据end */\r\n\r\nexport default defineComponent({\r\n  // props: {\r\n  //   modelValue: {\r\n  //     type: Boolean,\r\n  //     default: false\r\n  //   }\r\n  // },\r\n  // emits: ['update: modelValue'],\r\n\r\n  // 组件注册\r\n  // components: {\r\n  //   layout\r\n  // },\r\n  setup(props, { emit }) {\r\n    let router = useRouter() // 用于路由跳转 (useRouter() 一定要放在setup方法里面最上方位置 不然数值为undefined)\r\n    // console.log(router)\r\n\r\n    let store = useStore()\r\n\r\n    function pushHome() {\r\n      userLogin({\r\n        password: 'adm123',\r\n        username: 'admin'\r\n      })\r\n        .then((response: any) => {\r\n          store.commit('user/SET_TOKEN', response['token'])\r\n          store.commit('user/SET_ACCOUNT', response['name'])\r\n          setToken(response['token'])\r\n\r\n          // router.push('/')\r\n          router.push({\r\n            path: '/',\r\n            // query: {\r\n            //   ...response['data']\r\n            // }\r\n            query: {\r\n              name: response['name'],\r\n              token: response['token']\r\n            }\r\n          })\r\n        })\r\n        .catch(() => {})\r\n    }\r\n\r\n    /* computed */\r\n    // const name = computed(() => {\r\n    //   return 'ADMIN'\r\n    // })\r\n    let first_name = computed({\r\n      get: () => full_name.value.substring(1),\r\n      set: val => {\r\n        console.log(val)\r\n        first_name.value = 'Welcome' + val\r\n      }\r\n    })\r\n\r\n    /* computed跟props，emit一起使用 */\r\n    // const dialogVisble = computed({\r\n    //   get: () => props.modelValue, // setup函数第一个参数是props\r\n    //   set: (newVal) => {\r\n    //     emit('update: modelValue', newVal)\r\n    //   }\r\n    // })\r\n\r\n    /* watch */\r\n    // watch(name, () => {})\r\n\r\n    return {\r\n      full_name,\r\n      obj_name,\r\n      first_name,\r\n      // dialogVisble,\r\n      handleClick,\r\n      pushHome,\r\n    }\r\n  },\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <p>hello, {{ full_name }} {{ obj_name }} {{ first_name }}</p>\r\n    <button @click=\"handleClick\">按钮</button>\r\n    <button @click=\"pushHome\">登录</button>\r\n  </div>\r\n</template>\r\n"],"names":["_createElementVNode","_toDisplayString"],"mappings":"+HAuBA,KAAA,GAAA,EAAA,OAAA,EAIA,EAAA,EAAA,CAAA,EAEA,EAAA,IAAA,CACE,EAAA,MAAA,aACF,EAgBA,EAAA,EAAA,CAA+B,MAAA,EAAA,CAAA,QAAA,CAc3B,GAAA,GAAA,IAGA,EAAA,IAEA,YAAA,CACE,EAAA,CAAU,SAAA,SACE,SAAA,OACA,CAAA,EAAA,KAAA,AAAA,GAAA,CAGR,EAAA,OAAA,iBAAA,EAAA,KAAA,EACA,EAAA,OAAA,mBAAA,EAAA,IAAA,EACA,EAAA,EAAA,KAAA,EAGA,EAAA,KAAA,CAAY,KAAA,IACJ,MAAA,CAIC,KAAA,EAAA,KACU,MAAA,EAAA,KACC,CAClB,CAAA,CACD,CAAA,EAAA,MAAA,IAAA,CAEU,CAAA,CAAE,CAOnB,GAAA,GAAA,EAAA,CAA0B,IAAA,IAAA,EAAA,MAAA,UAAA,CAAA,EACc,IAAA,AAAA,GAAA,CAEpC,QAAA,IAAA,CAAA,EACA,EAAA,MAAA,UAAA,CAA+B,CACjC,CAAA,EAcF,MAAA,CAAO,YACL,WACA,aACA,cAEA,UACA,CACF,CAEJ,CAAA,mDAQQA,EAAA,IAAA,KAAA,UAAAC,EAAA,EAAA,SAAA,EAAA,IAAAA,EAAA,EAAA,QAAA,EAAA,IAAAA,EAAA,EAAA,UAAA,EAAA,CAAA,EAHkDD,EAAA,SAAA,CACd,QAAA,EAAA,IAAA,GAAA,GAAA,IAAA,IAAA,EAAA,aAAA,EAAA,YAAA,GAAA,CAAA,EAAxB,EAAA,cAAA,EAAeA,EAAA,SAAA,CACM,QAAA,EAAA,IAAA,GAAA,GAAA,IAAA,IAAA,EAAA,UAAA,EAAA,SAAA,GAAA,CAAA,EAArB,EAAA,cAAA,CAAY,CAAA"}