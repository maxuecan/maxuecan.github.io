{"version":3,"file":"index.dcc206d9.js","sources":["../../src/components/threeJs/base/33，天空盒子.vue"],"sourcesContent":["<template>\r\n    <div class=\"three-container\">\r\n        <canvas id=\"three-box\" ref=\"threeBox\"></canvas>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport * as THREE from 'three'\r\nimport { OrbitControls } from 'three/addons/controls/OrbitControls.js';\r\nimport { getCurrentInstance, onMounted, nextTick, ref, reactive } from 'vue'\r\n\r\nlet { ctx } = getCurrentInstance() as any\r\n\r\nonMounted(async () => {\r\n    await nextTick()\r\n    main()\r\n})\r\n\r\nfunction main() {\r\n    let img1 = new URL('../source/sky/posx.jpg', import.meta.url).href\r\n    let img2 = new URL('../source/sky/negx.jpg', import.meta.url).href\r\n    let img3 = new URL('../source/sky/posy.jpg', import.meta.url).href\r\n    let img4 = new URL('../source/sky/negy.jpg', import.meta.url).href\r\n    let img5 = new URL('../source/sky/posz.jpg', import.meta.url).href\r\n    let img6 = new URL('../source/sky/negz.jpg', import.meta.url).href\r\n    let sky = [\r\n        img1,\r\n        img2,\r\n        img3,\r\n        img4,\r\n        img5,\r\n        img6\r\n    ]\r\n\r\n    let canvas = ctx.$refs.threeBox\r\n\r\n    // 场景\r\n    let scene = new THREE.Scene()\r\n    // 盒子纹理加载器\r\n    let cubeLoader = new THREE.CubeTextureLoader()\r\n    scene.background = cubeLoader.load(sky)\r\n    // scene.opacity = 0\r\n\r\n    // 相机\r\n    let camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 10000)\r\n    camera.position.z = 500\r\n    camera.lookAt(scene.position)\r\n\r\n    // 渲染器\r\n    let renderer = new THREE.WebGLRenderer({\r\n        antialias: true,\r\n        logarithmicDepthBuffer: true\r\n    })\r\n    renderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n    // 控制器\r\n    let controls = new OrbitControls(camera, canvas)\r\n    controls.update()\r\n\r\n    // 灯光\r\n    let ambientLight = new THREE.AmbientLight('#ffffff', 1)\r\n    scene.add(ambientLight)\r\n\r\n    function resizeRendererToDisplaySize(renderer: any) {\r\n        let canvas = renderer.domElement\r\n        let pixelRatio = window.devicePixelRatio\r\n        let width = canvas.clientWidth * pixelRatio | 0\r\n        let height = canvas.clientHeight * pixelRatio | 0\r\n        let needResize = canvas.width !== width || canvas.height !== height\r\n        if (needResize) {\r\n            renderer.setSize(width, height, false)\r\n        }\r\n        return needResize\r\n    }\r\n\r\n    function render(time: number) {\r\n        if (resizeRendererToDisplaySize(renderer)) {\r\n            const canvas = renderer.domElement\r\n            camera.aspect = canvas.clientWidth / canvas.clientHeight\r\n            camera.updateProjectionMatrix()\r\n        }\r\n        controls.update();\r\n        renderer.render( scene, camera );\r\n\r\n\t\trequestAnimationFrame( render );\r\n    }\r\n\r\n    requestAnimationFrame(render)\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.three-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  #three-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: block;\r\n  }\r\n}\r\n</style>\r\n"],"names":["THREE.Scene","THREE.CubeTextureLoader","THREE.PerspectiveCamera","THREE.WebGLRenderer","THREE.AmbientLight"],"mappings":"0dAWA,GAAA,CAAA,OAAA,IAEA,EAAA,IAAA,wBACI,KAAA,GAAA,EACA,GAAK,EAAA,EAGT,YAAA,CACI,GAAA,GAAA,GAAA,KAAA,4BAAA,KAAA,QAAA,EAAA,KACA,EAAA,GAAA,KAAA,4BAAA,KAAA,QAAA,EAAA,KACA,EAAA,GAAA,KAAA,4BAAA,KAAA,QAAA,EAAA,KACA,EAAA,GAAA,KAAA,4BAAA,KAAA,QAAA,EAAA,KACA,EAAA,GAAA,KAAA,4BAAA,KAAA,QAAA,EAAA,KACA,EAAA,GAAA,KAAA,4BAAA,KAAA,QAAA,EAAA,KACA,EAAA,CAAU,EACN,EACA,EACA,EACA,EACA,CACA,EAGJ,EAAA,EAAA,MAAA,SAGA,EAAA,GAAAA,GAEA,EAAA,GAAAC,GACA,EAAA,WAAA,EAAA,KAAA,CAAA,EAIA,GAAA,GAAA,GAAAC,GAAA,GAAA,OAAA,WAAA,OAAA,YAAA,GAAA,GAAA,EACA,EAAA,SAAA,EAAA,IACA,EAAA,OAAA,EAAA,QAAA,EAGA,GAAA,GAAA,GAAAC,GAAA,CAAuC,UAAA,GACxB,uBAAA,EACa,CAAA,EAE5B,EAAA,QAAA,OAAA,WAAA,OAAA,WAAA,EAGA,GAAA,GAAA,GAAA,GAAA,EAAA,CAAA,EACA,EAAA,OAAA,EAGA,GAAA,GAAA,GAAAC,GAAA,UAAA,CAAA,EACA,EAAA,IAAA,CAAA,EAEA,WAAA,EAAA,CACI,GAAA,GAAA,EAAA,WACA,EAAA,OAAA,iBACA,EAAA,EAAA,YAAA,EAAA,EACA,EAAA,EAAA,aAAA,EAAA,EACA,EAAA,EAAA,QAAA,GAAA,EAAA,SAAA,EACA,MAAA,IACI,EAAA,QAAA,EAAA,EAAA,EAAA,EAEJ,CAAO,CAGX,WAAA,EAAA,CACI,GAAA,EAAA,CAAA,EAAA,CACI,KAAA,GAAA,EAAA,WACA,EAAA,OAAA,EAAA,YAAA,EAAA,aACA,EAAA,uBAAA,CAA8B,CAElC,EAAA,OAAA,EACA,EAAA,OAAA,EAAA,CAAA,EAEN,sBAAA,CAAA,CAA8B,CAG5B,sBAAA,CAAA,CAA4B"}